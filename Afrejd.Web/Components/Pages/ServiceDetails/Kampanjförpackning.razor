@page "/Kampanjförpackning"

@using Afrejd.Web.Data.Interfaces
@using Afrejd.Web.Data.Models
@inject ICartService CartService
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<article>
    <MudContainer MaxWidth="MaxWidth.ExtraLarge" Class=" py-6">
        <MudPaper Outlined="true" Class="d-flex flex-column">
            <MudPaper Elevation="0" Width="100%" Class="d-flex flex-column flex-md-row justify-space-between pa-6">
                <MudStack Class="d-flex justify-start">
                    <h1 class="display-1">
                        Kampanj <br />
                        förpackning
                    </h1>

                    <MudButton Variant="Variant.Filled" Size="Size.Medium" Style="background-color: #363732; color: white; width:fit-content;" @onclick="AddItemToCart">
                        Lägg i Varukorg
                    </MudButton>

                    <div>
                        @if (!string.IsNullOrEmpty(SuccessMessage))
                        {
                            <div class="alert alert-success" role="alert">
                                @SuccessMessage
                            </div>
                        }
                    </div>
                </MudStack>
                <MudPaper Elevation=0 Class="d-flex justify-content-end">
                    <MudImage Fluid="true" Class="rounded-xl" Src="/Images/stock14.jpg"></MudImage>
                </MudPaper>
            </MudPaper>
            <MudDivider DividerType="DividerType.Middle" Class="my-6" />

            <MudPaper Width="75%" Elevation=0 Style="margin:auto;">
                <MudText Class="mb-15" Style="font-size: 2em;">
                    Vårt breda utbud av tjänster inom digitaltryck, adressering, omslagning, reklamförpackningar, varuhosting, reklamlogistik och distribution gör det möjligt för oss att tillhandahålla 
                    skräddarsydda, säkra och effektiva kampanj- och logistiklösningar för ditt företag.
                </MudText>

                <MudText Class="mb-6">
                    Vi packar om, distribuerar, monterar flerelementkampanjer och mellanlagrar materialet — allt efter dina behov. 
                    På Afrejd kan du producera det mesta av det. Vi har en toppmodern maskinpark med automatiserade processer som är anpassade till marknadens behov och krav. 
                    Vi anpassar oss efter din beställning, så att du får den mest kostnadseffektiva lösningen, vilket sparar tid och pengar.
                </MudText>

                <h3>Utskrift och omslagning</h3>
                <MudText Class="mb-6">
                    Vi har en toppmodern maskinpark och en stor avdelning inom digitaltryck, omslagning och efterbehandling som är anpassad till marknadens behov och krav. 
                    Flexibilitet och maskiner anpassade till marknaden är nyckelord hos oss. Vi anpassar oss efter din beställning så att du får den mest optimala och kostnadseffektiva lösningen.
                </MudText>

                <h3>Anpassning på ett enkelt sätt</h3>
                <MudText Class="mb-6">
                    Det mesta av adresseringen på brevblad, fakturor, kampanjer eller liknande görs med lasertryck. 
                    Lasertryck kännetecknas av mycket god utskriftskvalitet och möjligheten till omfattande individualisering av information. 
                    Om pris och hastighet är viktiga för din nästa leverans är våra bläckstråleskrivare lösningen. Bläckstråleutskrift används för adressering av kuvert, broschyrer, vykort, plastförpackningar - och mycket mer. 
                    Vår utskriftskvalitet är mycket bra och du kan välja mellan olika typsnitt.
                </MudText>

                <h3>Digitaltryck ger stora möjligheter</h3>
                <MudText Class="mb-6">
                    Behöver du trycksaker, adressetiketter med logotyp och enskilda meddelanden, eller en komplett kampanj med snabb leverans och låg cirkulation? Då är digitaltryck det bästa valet. 
                    Här har du oändliga möjligheter till individualisering till en låg kostnad, både vad gäller text, bilder och pris. 
                    Vi levererar allt från marknadsundersökningar, etiketter, fakturor/avbokningsformulär och broschyrer, till mer avancerade DM-kampanjer. 
                    Vi kan även leverera digitalt tryckta kuvert med personliga meddelanden, där vi kan automatisera och matcha innehållet i kuvertet med modern teknik.
                </MudText>

                <h3>Flexibla omslutningslösningar</h3>
                <MudText Class="mb-6">
                    Naturligtvis kör våra maskiner i både svart och färg, och vi kan omsluta allt från C6 till C4. 
                    I kombination med avancerad programvara för sammanslagning av variabler i bokstäverna ger detta stora möjligheter för våra kunder. 
                    Ofta vet kunden vad man ska ha, men vi kan också hjälpa till att hitta den bästa och mest lönsamma lösningen för omslutningar.
                </MudText>

                <MudText Class="mb-6">
                    Våra medarbetare har lång erfarenhet av adressering, lasertryck, digitaltryck och kuvert — samt allmänna varor och reklamförpackningar. 
                    Kontakta oss gärna tidigt i processen så att vi kan hjälpa dig att optimera ditt arbete. 
                    Vi arbetar kontinuerligt med hela värdekedjan: från rådgivning, tryckning, förpackning, lagring och logistik till färdig leverans, och är väl medvetna om de krav och regler som gäller. 
                    Ofta kan en liten justering resultera i betydande ekonomiska besparingar för ditt företag.
                </MudText>
            </MudPaper>
        </MudPaper>
    </MudContainer>

    <MudPaper Elevation="0" Width="100%" Height="auto" Outlined="false" Class="d-flex flex-column flex-md-row align-items-center justify-content-center pa-6 gap-4" style="background-color: #363732;">

        <MudStack Class="ma-6 text-center align-items-center justify-content-center">
            <MudText Style="font-size: 2em; color: white;">
                Vi kan hjälpa dig med alla aspekter av logistik.
            </MudText>

            <MudButton Variant="Variant.Filled" Size="Size.Medium" Class="products-button" Href="/services">
                Våra tjänster
            </MudButton>
        </MudStack>

        <MudStack Class="d-flex flex-wrap justify-content-center gap-2" Style="width: 100%; max-width: 600px;">
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Rådgivning&Försäljning">Rådgivning & Försäljning</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/IT&Tech">IT & Tech</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Webbutik&Prenumeration">Webbutik & Prenumeration</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Varulager">Varulager</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Förpackning">Förpackning av varor</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Lagerhanterings-system">Lagerhanterings-system</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Kundtjänst">Kundtjänst</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Retur">Retur av varor</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Kampanjförpackning">Kampanjförpackning</MudButton>
            <MudButton Variant="Variant.Text" Class="product-buttons" Href="/Distribution">Distribution</MudButton>
        </MudStack>
    </MudPaper>
</article>


@code {
    private string SuccessMessage;
    private string ErrorMessage;
    private int ProductId = 13;

    private async Task AddItemToCart()
    {
        try
        {
            var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
            var user = authState.User;

            if (user.Identity.IsAuthenticated)
            {
                var userId = await CartService.GetUserId();
                await CartService.AddItemToCart(ProductId, userId);
                SuccessMessage = "Tjänsten har lagts till i varukorgen!";
            }
            else
            {
                NavigationManager.NavigateTo("Account/Register");
            }
        }
        catch (ArgumentException ex)
        {
            ErrorMessage = ex.Message;
        }
        catch (Exception ex)
        {
            ErrorMessage = $"An error occurred while adding the product to the cart: {ex.Message}";
        }
    }
}